<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>СУПЕР ПРИЗ! - РазводЛохов.ru</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --wheel-size: 360px;
      --wheel-spin-duration: 8s;
      --wheel-ease-out: cubic-bezier(0.15, 0.75, 0.35, 1);

      /* Цвета для сегментов (8 шт) */
      --c1: #ff0055; --s1-text: #fff;
      --c2: #ff4f00; --s2-text: #fff;
      --c3: #ffd500; --s3-text: #222; /* Желтый, темный текст */
      --c4: #00e075; --s4-text: #222; /* Зеленый, темный текст */
      --c5: #00b8ff; --s5-text: #222; /* Голубой, темный текст */
      --c6: #4400ff; --s6-text: #fff;
      --c7: #c400ff; --s7-text: #fff;
      --c8: #ff00a2; --s8-text: #fff;
      
      --text-shadow-light: 0 1px 1px rgba(255,255,255,0.6);
      --text-shadow-dark: 0 1px 2px rgba(0,0,0,0.5);
    }

    body {
      margin: 0;
      padding: 20px;
      box-sizing: border-box;
      font-family: 'Roboto', sans-serif;
      background-color: #0a0a14; /* Темный фон */
      background-image: /* Легкий шум или звездный фон */
        radial-gradient(circle at 1px 1px, rgba(200,200,255,0.08) 1px, transparent 0),
        radial-gradient(circle at 15px 15px, rgba(200,200,255,0.04) 1px, transparent 0);
      background-size: 30px 30px;
      color: #e0e8ff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      overflow-x: hidden;
      text-align: center;
    }

    .title-area { /* ... как в предыдущей "красивой" версии ... */ }
    @keyframes fadeInDown { /* ... */ }
    .header-title { /* ... */ }
    .sub-title { /* ... */ }
    .wheel-wrapper { /* ... */ }
    @keyframes zoomIn { /* ... */ }

    .pointer {
      width: 38px; height: 48px; background-color: #fdd835;
      clip-path: polygon(0% 50%, 100% 0%, 100% 100%);
      position: absolute; left: -14px; top: 50%;
      transform: translateY(-50%); z-index: 10;
      box-shadow: -3px 0px 10px rgba(0,0,0,0.3), 0 0 8px #fdd835;
      filter: brightness(1.1);
    }

    .wheel-container {
      width: var(--wheel-size);
      height: var(--wheel-size);
      position: relative;
    }

    .wheel {
      width: 100%; height: 100%;
      border-radius: 50%;
      border: 5px solid #22273d; /* Рамка колеса */
      background: #121521; /* Фоновый цвет под сегментами, если будут просветы */
      box-shadow: 0 0 20px rgba(0,0,0,0.5),
                  inset 0 0 30px rgba(0,0,0,0.7), /* Глубокая внутренняя тень */
                  0 0 40px rgba(50, 50, 150, 0.2); /* Легкое внешнее свечение */
      transition: transform var(--wheel-spin-duration) var(--wheel-ease-out);
      position: relative;
      transform: translateZ(0) rotate(0deg); /* Начальный поворот */
      will-change: transform;
      overflow: hidden; /* Важно для clip-path сегментов */
    }
    
    .wheel-segment {
        position: absolute;
        width: 50%; /* Радиус */
        height: 100%; /* Диаметр, чтобы transform-origin был по центру */
        top: 0;
        left: 50%; /* Начинаем от центра по горизонтали */
        transform-origin: 0% 50%; /* Вращаем вокруг левого центрального края (центра колеса) */
        /* clip-path для создания клина. 45 градусов = 360/8 */
        /* Координаты для polygon: (центр) (точка на дуге) (другая точка на дуге) */
        /* tan(22.5deg) * 100% (радиус) = 41.42% от радиуса. */
        /* Отступ от вертикали (50% - 41.42%) = 8.58% (для x) */
        /* Отступ от горизонтали (для y) = 100% (для x) */
        clip-path: polygon(0% 50%, 100% 8.58%, 100% 91.42%);
        display: flex;
        align-items: center;
        justify-content: flex-end; /* Текст будет у правого (внешнего) края */
        box-sizing: border-box;
        padding-right: 10%; /* Отступ текста от самого края */
    }

    .wheel-segment .text {
        transform: rotate(90deg); /* Поворачиваем текст, чтобы он был параллелен радиусу */
        /* Затем сам .wheel-segment вращается, и текст становится читаемым */
        font-size: 0.85em;
        font-weight: 700;
        white-space: normal;
        text-align: center;
        max-width: 65%; /* Ограничение ширины, чтобы текст не вылезал */
        line-height: 1.15;
        color: var(--s1-text); /* По умолчанию цвет первого сегмента */
        text-shadow: var(--text-shadow-dark); /* По умолчанию темная тень */
    }

    /* Применяем цвета фона и текста для каждого сегмента */
    .wheel-segment:nth-child(1) { background-color: var(--c1); transform: rotate(0deg); }
    .wheel-segment:nth-child(1) .text { color: var(--s1-text); text-shadow: var(--text-shadow-dark); }

    .wheel-segment:nth-child(2) { background-color: var(--c2); transform: rotate(45deg); }
    .wheel-segment:nth-child(2) .text { color: var(--s2-text); text-shadow: var(--text-shadow-dark); }
    
    .wheel-segment:nth-child(3) { background-color: var(--c3); transform: rotate(90deg); }
    .wheel-segment:nth-child(3) .text { color: var(--s3-text); text-shadow: var(--text-shadow-light); }

    .wheel-segment:nth-child(4) { background-color: var(--c4); transform: rotate(135deg); }
    .wheel-segment:nth-child(4) .text { color: var(--s4-text); text-shadow: var(--text-shadow-light); }

    .wheel-segment:nth-child(5) { background-color: var(--c5); transform: rotate(180deg); }
    .wheel-segment:nth-child(5) .text { color: var(--s5-text); text-shadow: var(--text-shadow-light); }

    .wheel-segment:nth-child(6) { background-color: var(--c6); transform: rotate(225deg); }
    .wheel-segment:nth-child(6) .text { color: var(--s6-text); text-shadow: var(--text-shadow-dark); }

    .wheel-segment:nth-child(7) { background-color: var(--c7); transform: rotate(270deg); }
    .wheel-segment:nth-child(7) .text { color: var(--s7-text); text-shadow: var(--text-shadow-dark); }

    .wheel-segment:nth-child(8) { background-color: var(--c8); transform: rotate(315deg); }
    .wheel-segment:nth-child(8) .text { color: var(--s8-text); text-shadow: var(--text-shadow-dark); }


    .wheel-hub {
        width: 16%; height: 16%; background: #1c1e2e; border-radius: 50%;
        border: 4px solid #3c4268; box-shadow: 0 0 10px rgba(0,0,0,0.5), inset 0 0 15px rgba(0,0,0,0.6);
        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 3;
    }

    /* ... остальные стили .btn-spin, .result-popup, .back-link, .stars-bg как в "красивой" версии ... */
    .btn-spin { /* Стили из предыдущей "красивой" версии */ }
    @keyframes fadeInUp { /* Стили из предыдущей "красивой" версии */ }
    .result-popup { /* Стили из предыдущей "красивой" версии */ }
    .back-link { /* Стили из предыдущей "красивой" версии */ }
    .stars-bg, .star, @keyframes twinkle-star-anim { /* Стили из предыдущей "красивой" версии */ }

    @media (max-width: 768px) { /* ... адаптация как в "красивой" версии, подстроить .wheel-segment .text ... */ }
    @media (max-width: 480px) { /* ... адаптация как в "красивой" версии, подстроить .wheel-segment .text ... */ }

  </style>
  <!-- HTML остается таким же, как в "красивой" версии, за исключением того, что сегменты теперь создаются JS -->
</head>
<body>
  <div class="stars-bg" id="starsContainer"></div>

  <div class="title-area">
    <h1 class="header-title">СУПЕР ПРИЗ!</h1>
    <p class="sub-title">Крути Колесо Удачи, Лох!</p>
  </div>

  <div class="wheel-wrapper">
    <div class="pointer"></div>
    <div class="wheel-container">
      <div class="wheel" id="prizeWheel">
        <!-- Сегменты будут добавлены JS -->
        <div class="wheel-hub"></div>
      </div>
    </div>
  </div>

  <button class="btn-spin" id="spinButton">ИСПЫТАТЬ УДАЧУ!</button>
  <div class="result-popup" id="resultPopup"> <!-- ... --> </div>
  <a href="index.html" class="back-link">На главную (если не страшно)</a>

  <script>
    const wheelElement = document.getElementById('prizeWheel');
    const spinButton = document.getElementById('spinButton');
    // ... остальные переменные для попапа и т.д. ...

    const segmentPrizes = [ /* ... список призов ... */ ];
    const numSegments = segmentPrizes.length;
    const segmentAngleDegrees = 360 / numSegments;

    let accumulatedRotation = 0;
    let isSpinning = false;

    function createSegments() {
        const hub = wheelElement.querySelector('.wheel-hub'); // Сохраняем хаб
        wheelElement.innerHTML = ''; // Очищаем всё, кроме хаба, который мы заново добавим
        if (hub) wheelElement.appendChild(hub); // Добавляем хаб обратно

        const fragment = document.createDocumentFragment();

        for (let i = 0; i < numSegments; i++) {
            const segmentDiv = document.createElement('div');
            segmentDiv.classList.add('wheel-segment');
            // Применяем nth-child стили динамически, чтобы CSS мог их подхватить
            // Это можно сделать через data-атрибут или直接 JS-стилизацию, если CSS не справляется с :nth-child для динамич. элементов
            // Для простоты, пока оставим так, CSS должен справиться с :nth-child(1) и т.д. если они есть в DOM
            // Лучше задавать стили напрямую через JS для фона и текста
            segmentDiv.style.backgroundColor = `var(--c${i+1})`;
            segmentDiv.style.transform = `rotate(${i * segmentAngleDegrees}deg)`;
            
            const textDiv = document.createElement('div');
            textDiv.classList.add('text');
            textDiv.textContent = segmentPrizes[i];
            textDiv.style.color = `var(--s${i+1}-text)`; // Цвет текста из CSS переменных
            // Тень текста можно тоже задавать из CSS переменных, если нужно
            if (getComputedStyle(document.documentElement).getPropertyValue(`--s${i+1}-text`).trim() === '#222') {
                 textDiv.style.textShadow = `var(--text-shadow-light)`;
            } else {
                 textDiv.style.textShadow = `var(--text-shadow-dark)`;
            }

            segmentDiv.appendChild(textDiv);
            fragment.appendChild(segmentDiv);
        }
        wheelElement.insertBefore(fragment, hub); // Вставляем сегменты перед хабом
    }
    
    // Логика spinButton.addEventListener('click', ...) остается такой же, как в предыдущей "красивой" версии
    // с pointerTargetAngle = 270;
    // ...

    // createStars() как раньше
    // ...

    createSegments();
    // createStars(40);
  </script>
</body>
</html>
