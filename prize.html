<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Колесо Удачи Лоха v3.4 - Конфетти-Феерия!</title>
    <style>
        :root {
            --neon-blue: #00f2ff; --neon-pink: #ff00ff; --neon-green: #39ff14;
            --neon-yellow: #fff000; --neon-orange: #ff8c00; --dark-bg: #0a0a14;
            --mid-bg: #1a1a2e; --light-text: #f5f5f5;
        }

        @font-face { /* ... шрифты без изменений ... */
            font-family: 'Orbitron'; src: url('https://fonts.gstatic.com/s/orbitron/v25/yMJRMIlzdpvBhQQL_Qq7dy0.woff2') format('woff2'); font-weight: 400;
        }
        @font-face {
            font-family: 'Orbitron'; src: url('https://fonts.gstatic.com/s/orbitron/v25/yMJWMIlzdpvBhQQL_Qrc3HlBY_c.woff2') format('woff2'); font-weight: 700;
        }

        body { /* ... без изменений ... */
            display: flex; justify-content: center; align-items: center; min-height: 100vh;
            background-color: var(--dark-bg); font-family: 'Orbitron', sans-serif;
            color: var(--light-text); margin: 0; overflow: hidden; position: relative;
        }
        body::before, body::after { /* ... фоновые эффекты без изменений ... */
            content: ""; position: absolute; top: 0; left: 0; right: 0; bottom: 0; z-index: -2;
        }
        body::before {
            background-image: linear-gradient(0deg, transparent 0%, rgba(0, 242, 255, 0.025) 50%, transparent 100%), linear-gradient(90deg, transparent 0%, rgba(255, 0, 255, 0.025) 50%, transparent 100%);
            background-size: 55px 55px, 55px 55px; animation: bgGrid 11s linear infinite;
        }
        body::after {
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.12) 50%);
            background-size: 100% 3px; opacity: 0.65; z-index: -1; pointer-events: none;
        }
        @keyframes bgGrid { 0% { background-position: 0 0; } 100% { background-position: 110px 110px; } }

        .fortune-wheel-container, h1, .wheel-wrapper, .wheel, .wheel::before, .wheel::after,
        .sector, .prize-label, .wheel-center, .wheel-center::before, .pointer, .pointer::after,
        .spin-button, .spin-button:before, .spin-button:hover:not(:disabled),
        .spin-button:active:not(:disabled), .spin-button:disabled,
        .result-popup, .result-popup h2, .result-popup p, .result-popup button,
        .result-popup button:hover, .result-popup button:active {
            /* Все стили для элементов колеса и попапа остаются такими же, как в v3.3 */
            /* Я их здесь опущу для краткости, но они должны быть скопированы из предыдущей версии */
        }
         /* Копирование стилей из v3.3 ... */
        .fortune-wheel-container { position: relative; display: flex; flex-direction: column; align-items: center; padding: 30px 35px; background-color: rgba(16, 16, 28, 0.92); border-radius: 30px; border: 3px solid var(--neon-blue); box-shadow: 0 0 30px var(--neon-blue), 0 0 60px var(--neon-blue), 0 0 90px var(--neon-pink), inset 0 0 22px rgba(0, 242, 255, 0.65), inset 0 0 10px rgba(255,255,255,0.45); backdrop-filter: blur(7px); }
        h1 { color: var(--neon-pink); text-shadow: 0 0 7px var(--neon-pink), 0 0 15px var(--neon-pink), 0 0 30px var(--neon-pink), 0 0 40px #fff, 0 0 55px #ff00de; margin-bottom: 30px; font-size: 2.3em; letter-spacing: 2.5px; border-bottom: 2px solid rgba(255,0,255,0.65); padding-bottom: 12px; font-weight: 700; text-align: center; }
        .wheel-wrapper { position: relative; width: 360px; height: 360px; margin-bottom: 30px; filter: drop-shadow(0 0 20px var(--neon-blue)); }
        .wheel { width: 100%; height: 100%; border-radius: 50%; background-color: #121220; border: 6px solid var(--neon-blue); box-shadow: 0 0 40px var(--neon-blue), 0 0 70px rgba(0, 242, 255, 0.75), inset 0 0 35px rgba(0, 242, 255, 0.8), inset 0 0 15px rgba(255, 255, 255, 0.7); position: relative; overflow: hidden; transition: transform 7.8s cubic-bezier(0.18, 0.95, 0.22, 1); }
        .wheel::before { width: calc(100% - 32px); height: calc(100% - 32px); border: 2px dashed var(--neon-green); opacity: 0.7; animation: rotateRing 17s linear infinite, pulseRing 1.7s infinite ease-in-out; }
        .wheel::after { width: calc(100% + 8px); height: calc(100% + 8px); border: 2px dotted var(--neon-pink); opacity: 0.8; animation: rotateRing 21s linear infinite reverse; }
        @keyframes rotateRing { from { transform: translate(-50%, -50%) rotate(0deg); } to { transform: translate(-50%, -50%) rotate(360deg); } }
        @keyframes pulseRing { 0%, 100% { opacity: 0.5; } 50% { opacity: 0.9; } }
        .sector { position: absolute; width: 100%; height: 100%; top: 0; left: 0; overflow: visible; }
        .prize-label { display: block; position: absolute; box-sizing: border-box; text-align: center; font-size: 10px; font-weight: 700; color: #fff; text-shadow: 0 0 3px rgba(0,0,0,1), 0 0 5px rgba(0,0,0,0.8); letter-spacing: 0.5px; white-space: normal; word-break: break-word; padding: 0px 2px; line-height: 1.15; pointer-events: none; }
        .wheel-center { position: absolute; width: 80px; height: 80px; background: radial-gradient(circle, var(--mid-bg) 20%, var(--dark-bg) 80%); border-radius: 50%; border: 5px solid var(--neon-pink); top: 50%; left: 50%; transform: translate(-50%, -50%); box-shadow: 0 0 20px var(--neon-pink), 0 0 40px var(--neon-pink), inset 0 0 20px rgba(255, 0, 255, 0.7); z-index: 2; }
        .wheel-center::before { content: ''; position: absolute; border-radius: 50%; top: 50%; left: 50%; width: 18px; height: 18px; background-color: var(--neon-blue); box-shadow: 0 0 12px var(--neon-blue), 0 0 22px var(--neon-blue), 0 0 5px #fff; animation: pulseDot 1.3s infinite ease-in-out; }
        @keyframes pulseDot { 0%, 100% { transform: translate(-50%, -50%) scale(1); } 50% { transform: translate(-50%, -50%) scale(1.3); } }
        .pointer { position: absolute; top: -17px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 26px solid transparent; border-right: 26px solid transparent; border-top: 40px solid var(--neon-pink); filter: drop-shadow(0 -6px 14px var(--neon-pink)) drop-shadow(0 0 7px #fff); z-index: 3; transition: transform 0.3s ease-out; }
        .pointer::after { content: ''; position: absolute; bottom: 3px; left: 50%; transform: translateX(-50%); width: 4px; height: 8px; background-color: rgba(255,255,255,0.7); border-radius: 2px; box-shadow: 0 0 5px #fff; }
        .spin-button { padding: 17px 38px; font-size: 1.35em; font-weight: 700; color: var(--light-text); background: linear-gradient(145deg, var(--neon-pink), #c000c0); border: none; border-radius: 15px; cursor: pointer; text-transform: uppercase; letter-spacing: 1.8px; box-shadow: 0 0 12px var(--neon-pink), 0 0 25px var(--neon-pink), 0 0 35px rgba(255, 0, 255, 0.75), inset 0 0 10px rgba(255, 255, 255, 0.55), 0 3px 6px rgba(0,0,0,0.25); transition: all 0.2s ease-out; position: relative; overflow: hidden; margin-top: 28px; }
        .spin-button:before { content: ""; position: absolute; top: 50%; left: 50%; width: 0; height: 0; background: rgba(255, 255, 255, 0.2); border-radius: 50%; transform: translate(-50%, -50%); transition: width 0.4s ease-out, height 0.4s ease-out, opacity 0.5s ease-out; opacity: 0; }
        .spin-button:hover:not(:disabled):before { width: 250%; height: 250%; opacity: 1; }
        .spin-button:hover:not(:disabled) { background: linear-gradient(145deg, #ff1aff, #d000d0); box-shadow: 0 0 18px var(--neon-pink), 0 0 35px var(--neon-pink), 0 0 60px #fff, inset 0 0 12px rgba(255, 255, 255, 0.85), 0 5px 10px rgba(0,0,0,0.2); transform: translateY(-2px); }
        .spin-button:active:not(:disabled) { transform: translateY(0px) scale(0.97); box-shadow: 0 0 5px var(--neon-pink), 0 0 10px var(--neon-pink), inset 0 0 10px rgba(0,0,0,0.4); }
        .spin-button:disabled { background: #555; color: #999; cursor: not-allowed; box-shadow: inset 0 0 10px rgba(0,0,0,0.5); }
        .result-popup { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.7); padding: 35px 50px; background-color: rgba(18, 18, 30, 0.98); border: 3px solid var(--neon-blue); border-radius: 24px; box-shadow: 0 0 45px var(--neon-blue), 0 0 75px var(--neon-pink), 0 0 100px rgba(0, 242, 255, 0.7); text-align: center; z-index: 1000; opacity: 0; transition: transform 0.48s cubic-bezier(0.34, 1.7, 0.64, 1), opacity 0.38s ease-out; }
        .result-popup.show { display: block; opacity: 1; transform: translate(-50%, -50%) scale(1); }
        .result-popup h2 { color: var(--neon-green); margin-top: 0; margin-bottom: 18px; font-size: 2.1em; font-weight: 700; text-shadow: 0 0 7px var(--neon-green), 0 0 14px var(--neon-green), 0 0 20px #fff; }
        .result-popup p { font-size: 1.4em; color: var(--light-text); margin-bottom: 28px; min-height: 36px; }
        .result-popup button { padding: 14px 30px; font-size: 1.05em; font-weight: 700; color: var(--dark-bg); background: linear-gradient(145deg, var(--neon-blue), #00b0b0); border: none; border-radius: 14px; cursor: pointer; transition: all 0.2s ease-out; box-shadow: 0 0 12px var(--neon-blue), 0 0 20px var(--neon-blue), 0 2px 5px rgba(0,0,0,0.25); }
        .result-popup button:hover { background: linear-gradient(145deg, #44ffff, #00c8c8); box-shadow: 0 0 16px var(--neon-blue), 0 0 25px var(--neon-blue), 0 0 7px #fff; transform: translateY(-2px); }
        .result-popup button:active { transform: translateY(0px) scale(0.97); }
        /* КОНЕЦ СКОПИРОВАННЫХ СТИЛЕЙ */


        /* НОВЫЕ СТИЛИ ДЛЯ КОНФЕТТИ */
        .confetti-container {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 2000; /* Поверх всего */
            overflow: hidden; /* Чтобы частицы не вылетали за пределы контейнера, если нужно */
        }

        .confetti-particle {
            position: absolute; /* Теперь относительно .confetti-container */
            width: var(--size, 10px);
            height: var(--size, 10px);
            background-color: var(--color, var(--neon-pink));
            opacity: 0;
            border-radius: 30% 70% / 70% 30%; /* Более разнообразная форма */
            /* Анимация будет устанавливаться в JS */
        }

        /* 1. Анимация медленного падения (снег) */
        @keyframes snowfall {
            0% {
                transform: translateY(-5vh) translateX(var(--start-x-snow)) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(105vh) translateX(var(--end-x-snow)) rotate(720deg);
                opacity: 0;
            }
        }

        /* 2. Анимация для угловых и случайных взрывов */
        @keyframes burst {
            0% { /* Начало в точке взрыва */
                transform: translate(0, 0) scale(0.3) rotate(0deg);
                opacity: 1;
            }
            20% { /* Максимальный разлет */
                transform: translate(var(--vx), var(--vy)) scale(1) rotate(var(--rotate-end));
                opacity: 0.9;
            }
            100% { /* Падение и исчезновение */
                transform: translate(var(--vx), calc(var(--vy) + 80vh)) scale(0.2) rotate(calc(var(--rotate-end) * 2));
                opacity: 0;
            }
        }

    </style>
</head>
<body>
    <div class="confetti-container" id="confettiContainer"></div> <!-- Контейнер для конфетти -->
    <div class="fortune-wheel-container">
    <!-- ... остальная структура без изменений ... -->
        <h1>Колесо Удачи Лоха</h1>
        <div class="wheel-wrapper">
            <div class="wheel" id="wheel"></div>
            <div class="wheel-center"></div>
            <div class="pointer" id="pointer"></div>
        </div>
        <button class="spin-button" id="spinButton">КРУТАНУТЬ!</button>
    </div>
    <div class="result-popup" id="resultPopup">
        <h2>ТВОЙ "СУПЕРПРИЗ"!</h2>
        <p id="prizeText"></p>
        <button id="closePopup">Вернуться к Разводу</button>
    </div>

    <script>
        const wheel = document.getElementById('wheel');
        const spinButton = document.getElementById('spinButton');
        const pointer = document.getElementById('pointer');
        const resultPopup = document.getElementById('resultPopup');
        const prizeText = document.getElementById('prizeText');
        const closePopupButton = document.getElementById('closePopup');
        const confettiContainer = document.getElementById('confettiContainer'); // Получаем контейнер

        // КОРОТКИЕ ПРИЗЫ v3.3 сохранены
        const prizes = [
            { text: "Чудо-Воздух!", color: "#FF3E96", textColor: "#fff" }, { text: "Вечный Спам", color: "#FF8C00", textColor: "#fff" },
            { text: "Лунный Песок", color: "#FFD700", textColor: "#111" }, { text: "Дыра от Бублика", color: "#32CD32", textColor: "#fff" },
            { text: "Пыль Единорога", color: "#1E90FF", textColor: "#fff" }, { text: "Смех Сквозь Слёзы", color: "#9370DB", textColor: "#fff" },
            { text: "Билет в Завтра*", color: "#FF1493", textColor: "#fff" }, { text: "Налог на Глупость", color: "#00CED1", textColor: "#111" },
            { text: "Объятия с Кактусом", color: "#FF4500", textColor: "#fff" }, { text: "Путевка в Сказку (без возврата)", color: "#ADFF2F", textColor: "#111" },
            { text: "Гарантия Удачи* (*нет)", color: "#BA55D3", textColor: "#fff" }, { text: "Сертификат Лоха", color: "#6A5ACD", textColor: "#fff" }
        ];

        // ... остальные переменные и функции (adjustColor, createSectors, spinWheel, closePopupButton, spinButton listeners) без изменений из v3.2 ...
        // Копирование JS из v3.2 (кроме confetti) ...
        let numSectors = prizes.length;
        let anglePerSectorDeg = 360 / numSectors;
        let anglePerSectorRad = (2 * Math.PI) / numSectors;
        let currentWheelRotationDeg = 0;
        let spinning = false;
        let winningPrizeIndex = 0;
        const POINTER_ANGLE_RAD = -Math.PI / 2;

        function adjustColor(hex, percent) { hex = hex.replace(/#/g, ''); const num = parseInt(hex, 16), amt = Math.round(2.55 * percent), R = (num >> 16) + amt, G = (num >> 8 & 0x00FF) + amt, B = (num & 0x0000FF) + amt; return "#" + (0x1000000 + (R<255?R<1?0:R:255)*0x10000 + (G<255?G<1?0:G:255)*0x100 + (B<255?B<1?0:B:255)).toString(16).slice(1); }

        function createSectors() {
            wheel.innerHTML = ''; const wheelRadius = wheel.offsetWidth / 2;
            prizes.forEach((prize, i) => {
                const sector = document.createElement('div'); sector.classList.add('sector');
                const color1 = prize.color; const color2 = adjustColor(prize.color, -30);
                sector.style.background = `linear-gradient(135deg, ${color1}, ${color2})`;
                const P0x = 50, P0y = 50;
                const startAngle = POINTER_ANGLE_RAD - anglePerSectorRad / 2 + i * anglePerSectorRad;
                const endAngle = POINTER_ANGLE_RAD - anglePerSectorRad / 2 + (i + 1) * anglePerSectorRad;
                const P1x = 50 + 50 * Math.cos(startAngle); const P1y = 50 + 50 * Math.sin(startAngle);
                const P2x = 50 + 50 * Math.cos(endAngle); const P2y = 50 + 50 * Math.sin(endAngle);
                sector.style.clipPath = `polygon(${P0x}% ${P0y}%, ${P1x}% ${P1y}%, ${P2x}% ${P2y}%)`;
                wheel.appendChild(sector);
                const prizeLabel = document.createElement('div'); prizeLabel.classList.add('prize-label');
                prizeLabel.textContent = prize.text; prizeLabel.style.color = prize.textColor || '#fff';
                const textAngleRad = POINTER_ANGLE_RAD + i * anglePerSectorRad;
                const textRotationDeg = (textAngleRad * 180 / Math.PI) + 90;
                const textRadius = wheelRadius * 0.6; // Для коротких текстов
                let labelWidth = anglePerSectorRad * textRadius * 0.95; labelWidth = Math.min(labelWidth, wheelRadius * 0.7);
                prizeLabel.style.width = `${labelWidth}px`; prizeLabel.style.fontSize = '10px';
                if (numSectors >= 12 && prize.text.length > 15) { prizeLabel.style.fontSize = '8px';}
                prizeLabel.style.left = '50%'; prizeLabel.style.top = '50%';
                prizeLabel.style.transformOrigin = 'center center';
                prizeLabel.style.transform = `translate(-50%, -50%) translate(${textRadius * Math.cos(textAngleRad)}px, ${textRadius * Math.sin(textAngleRad)}px) rotate(${textRotationDeg}deg)`;
                wheel.appendChild(prizeLabel);
            });
        }

        function spinWheel() {
            if (spinning) return; spinning = true; spinButton.disabled = true;
            pointer.style.transform = 'translateX(-50%) rotate(0deg)'; winningPrizeIndex = Math.floor(Math.random() * numSectors);
            const totalSpins = Math.floor(Math.random() * 5) + 9;
            let targetWheelLandingAngleDeg = (360 - (winningPrizeIndex * anglePerSectorDeg)) % 360;
            const randomOffsetDeg = (Math.random() - 0.5) * (anglePerSectorDeg * 0.3);
            targetWheelLandingAngleDeg = (targetWheelLandingAngleDeg + randomOffsetDeg + 360) % 360;
            let additionalRotationDeg = (totalSpins * 360) + targetWheelLandingAngleDeg - (currentWheelRotationDeg % 360);
            const minRotations = (currentWheelRotationDeg % 360) + 360 * 3;
            if (additionalRotationDeg < minRotations) { additionalRotationDeg += 360 * Math.ceil((minRotations - additionalRotationDeg) / 360); }
            currentWheelRotationDeg += additionalRotationDeg;
            wheel.style.transition = `transform ${7 + Math.random()*2.5}s cubic-bezier(0.18, 0.95, 0.22, 1)`;
            wheel.style.transform = `rotate(${currentWheelRotationDeg}deg)`;
            wheel.addEventListener('transitionend', () => {
                wheel.style.transition = 'none'; prizeText.textContent = prizes[winningPrizeIndex].text;
                resultPopup.classList.add('show');
                startConfettiShow(); // <--- ЗАПУСК НОВОГО КОНФЕТТИ-ШОУ
                pointer.style.transform = 'translateX(-50%) rotate(-15deg)';
                setTimeout(() => pointer.style.transform = 'translateX(-50%) rotate(10deg)', 150);
                setTimeout(() => pointer.style.transform = 'translateX(-50%) rotate(-5deg)', 300);
                setTimeout(() => pointer.style.transform = 'translateX(-50%) rotate(0deg)', 450);
                spinning = false;
            }, { once: true });
        }
        closePopupButton.addEventListener('click', () => { resultPopup.classList.remove('show'); spinButton.disabled = false; });
        spinButton.addEventListener('click', spinWheel);
        setTimeout(() => { createSectors(); wheel.style.transform = `rotate(0deg)`; }, 250);
        // КОНЕЦ СКОПИРОВАННОГО JS


        // НОВАЯ СИСТЕМА КОНФЕТТИ
        const confettiColors = [
            getComputedStyle(document.documentElement).getPropertyValue('--neon-blue').trim(),
            getComputedStyle(document.documentElement).getPropertyValue('--neon-pink').trim(),
            getComputedStyle(document.documentElement).getPropertyValue('--neon-green').trim(),
            getComputedStyle(document.documentElement).getPropertyValue('--neon-yellow').trim(),
            getComputedStyle(document.documentElement).getPropertyValue('--neon-orange').trim(),
            '#dd00dd', '#00ddff', '#ff6600'
        ];
        let confettiIntervalId = null;

        function createParticle(type, options = {}) {
            const particle = document.createElement('div');
            particle.classList.add('confetti-particle');
            const size = Math.random() * 8 + 6; // 6-14px
            particle.style.setProperty('--size', size + 'px');
            particle.style.setProperty('--color', confettiColors[Math.floor(Math.random() * confettiColors.length)]);
            particle.style.left = options.startX !== undefined ? options.startX + 'px' : '0px'; // Начальная X
            particle.style.top = options.startY !== undefined ? options.startY + 'px' : '0px';   // Начальная Y

            if (type === 'snow') {
                particle.style.setProperty('--start-x-snow', (Math.random() * 100) + 'vw');
                particle.style.setProperty('--end-x-snow', (parseFloat(particle.style.getPropertyValue('--start-x-snow')) + (Math.random() * 200 - 100)) + 'px');
                particle.style.animation = `snowfall ${6 + Math.random() * 4}s linear ${Math.random() * 7}s forwards`; // Разная длительность и задержка
            } else if (type === 'burst') {
                const angle = options.angle !== undefined ? options.angle : Math.random() * Math.PI * 2;
                const speed = options.speed !== undefined ? options.speed : Math.random() * 150 + 100; // Дальность "выстрела"
                particle.style.setProperty('--vx', Math.cos(angle) * speed + 'px');
                particle.style.setProperty('--vy', Math.sin(angle) * speed - (speed * 0.4) + 'px'); // Небольшой подъем
                particle.style.setProperty('--rotate-end', (Math.random() * 720 - 360) + 'deg');
                particle.style.animation = `burst ${2 + Math.random() * 1.5}s ease-out forwards`;
            }
            confettiContainer.appendChild(particle);
            setTimeout(() => particle.remove(), 8000); // Гарантированно удаляем все частицы
        }

        function launchCornerBursts() {
            // Левый нижний угол
            for (let i = 0; i < 30; i++) { // 30 частиц на взрыв
                createParticle('burst', {
                    startX: Math.random() * 50, // Рядом с левым краем
                    startY: window.innerHeight - Math.random() * 50, // Рядом с нижним краем
                    angle: -Math.PI / 2.5 + (Math.random() * Math.PI / 2.5) - Math.PI /10, // Направлено вверх и к центру
                    speed: Math.random() * 180 + 120
                });
            }
            // Правый нижний угол
            for (let i = 0; i < 30; i++) {
                createParticle('burst', {
                    startX: window.innerWidth - Math.random() * 50,
                    startY: window.innerHeight - Math.random() * 50,
                    angle: -Math.PI / 2.5 - (Math.random() * Math.PI / 2.5) + Math.PI /10, // Направлено вверх и к центру
                    speed: Math.random() * 180 + 120
                });
            }
        }

        function launchRandomBursts() {
            const numBursts = Math.floor(Math.random() * 8) + 3; // 3-10 взрывов
            for (let i = 0; i < numBursts; i++) {
                setTimeout(() => {
                    const burstX = Math.random() * (window.innerWidth * 0.8) + (window.innerWidth * 0.1); // Не у самых краев
                    const burstY = Math.random() * (window.innerHeight * 0.7) + (window.innerHeight * 0.1); // Не у самых краев
                    for (let j = 0; j < 20; j++) { // 20 частиц на случайный взрыв
                        createParticle('burst', { startX: burstX, startY: burstY });
                    }
                }, Math.random() * 5000 + 1000); // Взрывы в течение 1-6 секунд
            }
        }

        function startConfettiShow() {
            confettiContainer.innerHTML = ''; // Очищаем старые конфетти

            // 1. Запускаем "снегопад"
            for (let i = 0; i < 60; i++) { // 60 снежинок
                createParticle('snow');
            }

            // 2. Угловые взрывы
            launchCornerBursts();

            // 3. Случайные взрывы
            launchRandomBursts();

            // Остановка через 8 секунд (в основном для снегопада, если он зациклен)
            // Но т.к. анимации имеют forwards и удаление по таймауту, это может быть не строго нужно
            // clearTimeout(confettiIntervalId); // Если был предыдущий интервал
            // confettiIntervalId = setTimeout(() => {
            //     // Можно добавить логику остановки генерации, если снегопад был бы непрерывным
            // }, 8000);
        }
    </script>
</body>
</html>
